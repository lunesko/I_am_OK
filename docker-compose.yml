services:
  flutter-build:
    build:
      context: .
      dockerfile: Dockerfile
    volumes:
      # Зберігати APK на хості
      - ./build/outputs:/output
      # Кеш Flutter для швидшої збірки
      - flutter-cache:/root/.pub-cache
      # Кеш Gradle
      - gradle-cache:/root/.gradle
    environment:
      - FLUTTER_BUILD_MODE=release
      - ANDROID_HOME=/opt/android-sdk
    # Команда вже визначена в Dockerfile
    # APK автоматично копіюється в /output

volumes:
  flutter-cache:
  gradle-cache:
