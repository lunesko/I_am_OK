# –ü–ª–∞–Ω —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å —Ç–∞ –Ω–æ–≤–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π
## 8 –ø—É–Ω–∫—Ç—ñ–≤ –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è Ya OK

**–î–∞—Ç–∞:** 6 –ª—é—Ç–æ–≥–æ 2026  
**–°—Ç–∞—Ç—É—Å:** –ê–Ω–∞–ª—ñ–∑ –∑–∞–≤–µ—Ä—à–µ–Ω–æ, –≥–æ—Ç–æ–≤–∏–π –¥–æ —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—ó

---

## üìã –ó–∞–≥–∞–ª—å–Ω–∏–π –æ–≥–ª—è–¥

–ü—ñ—Å–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É –∫–æ–¥–æ–≤–æ—ó –±–∞–∑–∏ –≤–∏—è–≤–ª–µ–Ω–æ –Ω–∞—Å—Ç—É–ø–Ω–µ:

### ‚úÖ –í–∂–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ:
1. **QR-–∫–æ–¥ –∑ —ñ–º–µ–Ω–µ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞** - –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ
2. **–í–∏–±—ñ—Ä –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏** - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –≤ `FamilyFragment` —Ç–∞ `MainFragment`
3. **–í–∫–ª–∞–¥–∫–∏ –≤—Ö—ñ–¥–Ω–∏—Ö/–≤–∏—Ö—ñ–¥–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å** - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –≤ `InboxFragment`
4. **–î–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω—î –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤** - –ª–æ–≥—ñ–∫–∞ `contact_add_request` —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞
5. **Offline –±—É—Ñ–µ—Ä–∏–∑–∞—Ü—ñ—è** - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ `DtnQueue`
6. **Mesh –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è** - —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ `DtnRouter`

### ‚ö†Ô∏è –ü–æ—Ç—Ä–µ–±—É—î –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ç–∞ –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è:
- –î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —á–µ—Ä–µ–∑ –≤—Å—ñ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏
- –Ü–Ω–¥–∏–∫–∞—Ü—ñ—è –∞–∫—Ç–∏–≤–Ω–∏—Ö –∑'—î–¥–Ω–∞–Ω—å
- –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤–∫–ª–∞–¥–æ–∫ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

---

## 1Ô∏è‚É£ QR-–∫–æ–¥ —ñ —ñ–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

### –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω: ‚úÖ –ü–†–ê–¶–Æ–Ñ
**–§–∞–π–ª:** `android/app/src/main/kotlin/app/poruch/ya_ok/ui/QrCodeActivity.kt`

**–©–æ –≤–∂–µ –∑—Ä–æ–±–ª–µ–Ω–æ:**
```kotlin
// QR-–∫–æ–¥ –≤–∫–ª—é—á–∞—î —ñ–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
val userName = getSharedPreferences("ya_ok_prefs", MODE_PRIVATE)
    .getString("user_name", null)
if (userName != null) {
    append("&name=${android.net.Uri.encode(userName)}")
}
```

**–ü–∞—Ä—Å–∏–Ω–≥ –ø—Ä–∞—Ü—é—î:**
```kotlin
// FamilyFragment.kt - lines 247-259
private fun parseContactQr(raw: String): ContactQr {
    val name = uri?.getQueryParameter("name")?.trim()?.let { 
        android.net.Uri.decode(it)  // –î–µ–∫–æ–¥—É—î URL-encoded —ñ–º'—è
    }
    return ContactQr(normalizedId, x25519Hex, name)
}
```

**–ê–≤—Ç–æ–∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –ø—Ä–∞—Ü—é—î:**
```kotlin
// Lines 134-138
val qrData = if (scannedId != null) parseContactQr(scannedId) else null
if (prefillName == null) {
    prefillName = qrData?.name  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø–æ–≤–Ω—é—î –ø–æ–ª–µ —ñ–º–µ–Ω—ñ
}
```

### ‚ùì –ú–æ–∂–ª–∏–≤–∞ –ø—Ä–æ–±–ª–µ–º–∞:
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–ø–æ–≤–Ω–∏–≤ —Å–≤–æ—î —ñ–º'—è –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö (`user_name` –≤ `SharedPreferences`)
- –Ø–∫—â–æ —ñ–º'—è –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, QR –Ω–µ –±—É–¥–µ –º—ñ—Å—Ç–∏—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä `name`

### ‚úÖ –†—ñ—à–µ–Ω–Ω—è:
–î–æ–¥–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó QR —ñ –Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —Å–≤–æ—î —ñ–º'—è.

---

## 2Ô∏è‚É£ –í–∏–±—ñ—Ä –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

### –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω: ‚úÖ –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û
**–§–∞–π–ª:** `android/app/src/main/kotlin/app/poruch/ya_ok/ui/MainFragment.kt`

**–†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:**
```kotlin
// Lines 366-389
private fun showContactSelectionForSend() {
    // Multi-select –¥—ñ–∞–ª–æ–≥
    .setMultiChoiceItems(contactNames, null) { _, which, isChecked ->
        if (isChecked) {
            selectedIndices.add(which)
        } else {
            selectedIndices.remove(which)
        }
    }
    .setPositiveButton("–ù–∞–¥—ñ—Å–ª–∞—Ç–∏") { ... }  // –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –≤–∏–±—Ä–∞–Ω–∏–º
    .setNeutralButton("–í—Å—ñ–º") { ... }         // –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –≤—Å—ñ–º
}
```

**–í—ñ–¥–ø—Ä–∞–≤–∫–∞ –∫–æ–∂–Ω–æ–º—É –∫–æ–Ω—Ç–∞–∫—Ç—É –æ–∫—Ä–µ–º–æ:**
```kotlin
// Lines 389-415
private fun sendToRecipients(recipientIds: List<String>) {
    recipientIds.forEach { recipientId ->
        // –°—Ç–∞—Ç—É—Å
        val statusResult = CoreGateway.sendStatusTo(status, recipientId)
        // –¢–µ–∫—Å—Ç
        if (text.isNotEmpty()) {
            CoreGateway.sendTextTo(text, recipientId)
        }
        // –ì–æ–ª–æ—Å
        if (voice != null) {
            CoreGateway.sendVoiceTo(voice, recipientId)
        }
    }
}
```

### ‚úÖ –°—Ç–∞—Ç—É—Å: –ü–†–ê–¶–Æ–Ñ
–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –ø–æ–≤–Ω—ñ—Å—Ç—é —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ:
1. –í–∏–±—Ä–∞—Ç–∏ –æ–¥–Ω–æ–≥–æ –∞–±–æ –∫—ñ–ª—å–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ (multi-select)
2. –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –≤—Å—ñ–º –∫–æ–Ω—Ç–∞–∫—Ç–∞–º (–∫–Ω–æ–ø–∫–∞ "–í—Å—ñ–º")
3. –ö–æ–∂–µ–Ω –∫–æ–Ω—Ç–∞–∫—Ç –æ—Ç—Ä–∏–º—É—î –æ–∫—Ä–µ–º–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ `sendTextTo(message, contactId)`

---

## 3Ô∏è‚É£ –í–∫–ª–∞–¥–∫–∏ –≤—Ö—ñ–¥–Ω–∏—Ö/–≤–∏—Ö—ñ–¥–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

### –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω: ‚úÖ –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û
**–§–∞–π–ª:** `android/app/src/main/kotlin/app/poruch/ya_ok/ui/InboxFragment.kt`

**–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è:**
```kotlin
// Lines 27-62
private enum class TabType {
    ALL, INCOMING, OUTGOING
}

tabLayout.addTab(newTab().setText("–í—Å—ñ"))
tabLayout.addTab(newTab().setText("–í—Ö—ñ–¥–Ω—ñ"))
tabLayout.addTab(newTab().setText("–í–∏—Ö—ñ–¥–Ω—ñ"))

addOnTabSelectedListener(object : TabLayout.OnTabSelectedListener {
    override fun onTabSelected(tab: TabLayout.Tab?) {
        currentTab = when (tab?.position) {
            1 -> TabType.INCOMING
            2 -> TabType.OUTGOING
            else -> TabType.ALL
        }
        renderMessages()
    }
})
```

**–§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å:**
```kotlin
// Lines 82-94
val isOutgoing = senderId == myId
val shouldShow = when (currentTab) {
    TabType.ALL -> true
    TabType.INCOMING -> !isOutgoing
    TabType.OUTGOING -> isOutgoing
}

// Lines 106-107
val direction = if (isOutgoing) "‚û§" else "‚óÄ"
messageSubtitle.text = "$direction ${display.time}"
```

### ‚úÖ –°—Ç–∞—Ç—É—Å: –ü–†–ê–¶–Æ–Ñ
–í–∫–ª–∞–¥–∫–∏ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω—É—é—Ç—å. –ú–æ–∂–ª–∏–≤–∞ –ø—Ä–æ–±–ª–µ–º–∞: –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ `TabLayout` –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –≤ `fragment_inbox.xml`.

---

## 4Ô∏è‚É£ –ú–µ—Ö–∞–Ω—ñ–∑–º –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

### –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω: ‚ö†Ô∏è –ü–û–¢–†–ï–ë–£–Ñ –î–Ü–ê–ì–ù–û–°–¢–ò–ö–ò

**–õ–∞–Ω—Ü—é–∂–æ–∫ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏:**
```
MainFragment
    ‚Üì sendToRecipients()
CoreGateway.sendTextTo(text, recipientId)
    ‚Üì JNI
ya_ok_core/src/api/mod.rs
    ‚Üì ya_ok_send_text_to()
create_and_send_packet_to()
    ‚Üì
DtnRouter.send_to(packet, recipient_id)
    ‚Üì
TransportManager (UDP/BLE/Mesh)
```

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–¥—É Rust:**
```rust
// ya_ok_core/src/api/mod.rs - lines 827-876
fn create_and_send_packet_to(
    state: &Arc<CoreState>,
    message: Message,
    recipient_id: &str,
) -> Result<(), ApiError> {
    // 1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ peer
    if let Some(peer) = known_peers.get(recipient_id) {
        // 2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ x25519 –∫–ª—é—á–∞
        if let Some(x25519_key_bytes) = &peer.x25519_public_key {
            // 3. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞–∫–µ—Ç—É
            if let Ok(packet) = Packet::from_message(&message, identity, &receiver_key) {
                // 4. –í—ñ–¥–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ router
                router.send_to(&packet, recipient_id).await
            }
        }
    }
}
```

### üîç –ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏:

#### A. Peer –Ω–µ –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏–π
```kotlin
// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞: FamilyFragment.kt - lines 180-187
if (!qrData.x25519Hex.isNullOrBlank()) {
    val result = CoreGateway.addPeer(qrData.id, qrData.x25519Hex)
    peerAdded = (result == 0)
}
```

**–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
- –î–æ–¥–∞—Ç–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è `CoreGateway.getPeerList()` –ø–µ—Ä–µ–¥ –≤—ñ–¥–ø—Ä–∞–≤–∫–æ—é
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ `addPeer()` –ø–æ–≤–µ—Ä—Ç–∞—î 0 (—É—Å–ø—ñ—Ö)

#### B. Relay –Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π
```kotlin
// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ relay
// UdpTransport.kt –ø–æ–≤–∏–Ω–µ–Ω –º–∞—Ç–∏ active connection
```

**–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏ `UdpTransport.start()`
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å `relay.ya-ok.com` –∞–±–æ Fly.io relay

#### C. BLE/Mesh –Ω–µ –∞–∫—Ç–∏–≤–Ω—ñ
```kotlin
// BleTransport.kt —Ç–∞ WifiDirectController.kt
// –ú–∞—é—Ç—å –∑–∞–ø—É—Å–∫–∞—Ç–∏—Å—å –≤ TransportService
```

**–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Bluetooth –¥–æ–∑–≤–æ–ª–∏
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `BleTransport.start()` –ª–æ–≥–∏

### ‚úÖ –ü–ª–∞–Ω –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:

1. **–î–æ–¥–∞—Ç–∏ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é:**
```kotlin
// MainFragment.kt
private fun diagnoseMessageDelivery() {
    val peers = CoreGateway.getPeerList()
    Log.d("YaOk", "Known peers: $peers")
    
    val stats = CoreGateway.getStats()
    Log.d("YaOk", "Core stats: $stats")
    
    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç—ñ–≤
    Log.d("YaOk", "UDP active: ${udpTransport.isActive}")
    Log.d("YaOk", "BLE active: ${bleTransport.isActive}")
}
```

2. **–î–æ–¥–∞—Ç–∏ retry –ª–æ–≥—ñ–∫—É:**
```kotlin
// –Ø–∫—â–æ sendTextTo –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ–º–∏–ª–∫—É, –ø–æ–≤—Ç–æ—Ä–∏—Ç–∏ —á–µ—Ä–µ–∑ 5 —Å–µ–∫
if (sendResult != 0) {
    handler.postDelayed({
        CoreGateway.sendTextTo(text, recipientId)
    }, 5000)
}
```

3. **–î–æ–¥–∞—Ç–∏ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å—É –≤—ñ–¥–ø—Ä–∞–≤–∫–∏:**
```kotlin
// –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É:
// ‚è≥ –í—ñ–¥–ø—Ä–∞–≤–∫–∞...
// ‚úÖ –î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ
// ‚ö†Ô∏è –ß–µ–∫–∞—î –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
```

---

## 5Ô∏è‚É£ –î–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω—î –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤

### –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω: ‚úÖ –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û (–ø–æ—Ç—Ä–µ–±—É—î —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)

**–í—ñ–¥–ø—Ä–∞–≤–∫–∞ –∑–∞–ø–∏—Ç—É:**
```kotlin
// FamilyFragment.kt - lines 200-215
val addRequestJson = buildString {
    append("{\"type\":\"contact_add_request\",")
    append("\"id\":\"$myId\",")
    append("\"name\":\"$myName\"")
    if (!myX25519.isNullOrBlank()) {
        append(",\"x25519\":\"$myX25519\"")
    }
    append("}")
}
val sendResult = CoreGateway.sendTextTo(addRequestJson, qrData.id)
```

**–û–±—Ä–æ–±–∫–∞ –∑–∞–ø–∏—Ç—É:**
```kotlin
// TransportService.kt - lines 100-158
private fun handleContactAddRequest(jsonContent: String, senderId: String) {
    val contactId = requestObj.optString("id")
    val contactName = requestObj.optString("name", "–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á")
    val x25519Key = requestObj.optString("x25519")
    
    // Auto-add contact
    ContactStore.addContact(this, contact)
    
    // Sync peer if x25519 key available
    if (x25519Key.isNotBlank()) {
        CoreGateway.addPeer(contactId, x25519Key)
    }
    
    // Show notification
    NotificationHelper.showContactAdded(this, contactName)
}
```

### ‚úÖ –°—Ç–∞—Ç—É—Å: –ü–†–ê–¶–Æ–Ñ (—Ç–µ–æ—Ä–µ—Ç–∏—á–Ω–æ)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è `contact_add_request` –º–æ–∂–µ –Ω–µ –¥–æ—Ö–æ–¥–∏—Ç–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ–±–ª–µ–º–∏ –∑ –¥–æ—Å—Ç–∞–≤–∫–æ—é (–¥–∏–≤. –ø—É–Ω–∫—Ç 4).

**–†—ñ—à–µ–Ω–Ω—è:**
1. –°–ø–æ—á–∞—Ç–∫—É –≤–∏—Ä—ñ—à–∏—Ç–∏ –ø—Ä–æ–±–ª–µ–º—É –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
2. –î–æ–¥–∞—Ç–∏ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è: "–í–∞—à –∑–∞–ø–∏—Ç –Ω–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ"
3. –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ —Å—Ç–∞—Ç—É—Å: "–û—á—ñ–∫—É—î –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –≤—ñ–¥ John"

---

## 6Ô∏è‚É£ –Ü–Ω–¥–∏–∫–∞—Ü—ñ—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∑'—î–¥–Ω–∞–Ω–Ω—è

### –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω: ‚ö†Ô∏è –ß–ê–°–¢–ö–û–í–û –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û

**–Ü—Å–Ω—É—é—á–∏–π UI:**
```xml
<!-- fragment_main.xml - lines 364-404 -->
<TextView android:id="@+id/bluetoothStatusIcon" android:text="üì∂" />
<TextView android:id="@+id/bluetoothStatusText" android:text="Bluetooth" />
<TextView android:id="@+id/meshStatusIcon" android:text="üîó" />
<TextView android:id="@+id/meshStatusText" android:text="Mesh" />
<TextView android:id="@+id/relayStatusIcon" android:text="üåê" />
<TextView android:id="@+id/relayStatusText" android:text="Relay" />
```

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –°—Ç–∞—Ç—É—Å–∏ –Ω–µ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è

**–ü–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏:**
```kotlin
// MainFragment.kt
private fun updateConnectionStatus() {
    // Bluetooth
    val bleActive = bleTransport?.isActive() ?: false
    bluetoothStatusIcon.text = if (bleActive) "üì∂" else "üìµ"
    bluetoothStatusText.setTextColor(
        if (bleActive) Color.GREEN else Color.GRAY
    )
    
    // Relay
    val relayActive = udpTransport?.isConnectedToRelay() ?: false
    relayStatusIcon.text = if (relayActive) "üåê" else "üö´"
    relayStatusText.setTextColor(
        if (relayActive) Color.GREEN else Color.GRAY
    )
    
    // Mesh (–∫—ñ–ª—å–∫—ñ—Å—Ç—å peer'—ñ–≤)
    val peerCount = getPeerCount()
    meshStatusIcon.text = if (peerCount > 0) "üîó" else "‚õìÔ∏è‚Äçüí•"
    meshStatusText.text = "Mesh ($peerCount)"
}

// –û–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –∫–æ–∂–Ω—ñ 5 —Å–µ–∫—É–Ω–¥
private val statusUpdateRunnable = object : Runnable {
    override fun run() {
        updateConnectionStatus()
        handler.postDelayed(this, 5000)
    }
}
```

### ‚úÖ –ü–ª–∞–Ω —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó:

1. –î–æ–¥–∞—Ç–∏ –º–µ—Ç–æ–¥–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å—É –≤ `UdpTransport`, `BleTransport`
2. –û—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∏—Ö peer'—ñ–≤ –∑ `CoreGateway.getPeerList()`
3. –ü–µ—Ä—ñ–æ–¥–∏—á–Ω–æ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ UI (–∫–æ–∂–Ω—ñ 5 —Å–µ–∫)
4. –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ tooltip –ø—Ä–∏ –∫–ª—ñ–∫—É: "Bluetooth: 2 –ø—Ä–∏—Å—Ç—Ä–æ—ó –ø–æ—Ä—É—á"

---

## 7Ô∏è‚É£ Offline –±—É—Ñ–µ—Ä–∏–∑–∞—Ü—ñ—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

### –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω: ‚úÖ –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û –í RUST CORE

**Rust implementation:**
```rust
// ya_ok_core/src/routing/queue.rs
pub struct DtnQueue {
    priority_queue: BinaryHeap<QueuedPacket>,
    seen_packets: HashSet<String>,
}

impl DtnQueue {
    pub fn enqueue(&mut self, packet: Packet, priority: Priority) {
        self.priority_queue.push(QueuedPacket {
            packet,
            priority,
            enqueued_at: Instant::now(),
        });
    }
}
```

**TransportService sync:**
```kotlin
// TransportService.kt - lines 63-68
private fun syncOutgoing() {
    val packets = CoreGateway.exportPendingPackets(50).orEmpty()
    if (packets.isBlank()) return
    
    udpTransport.send(packets)
    bleTransport.send(packets)
}
```

### ‚úÖ –°—Ç–∞—Ç—É—Å: –ü–†–ê–¶–Æ–Ñ

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**
1. –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ SQLite (`storage.store_message()`)
2. –ü–∞–∫–µ—Ç –¥–æ–¥–∞—î—Ç—å—Å—è –≤ `DtnQueue`
3. `TransportService` –µ–∫—Å–ø–æ—Ä—Ç—É—î pending –ø–∞–∫–µ—Ç–∏ –∫–æ–∂–Ω—ñ 15 —Å–µ–∫
4. –í—ñ–¥–ø—Ä–∞–≤–ª—è—î —á–µ—Ä–µ–∑ –¥–æ—Å—Ç—É–ø–Ω—ñ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏ (UDP/BLE)
5. –ü—Ä–∏ —É—Å–ø—ñ—Ö—É –ø–∞–∫–µ—Ç –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è –∑ —á–µ—Ä–≥–∏

**–ú–æ–∂–ª–∏–≤–µ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è:**
- –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É —Å—Ç–∞—Ç—É—Å "–í —á–µ—Ä–∑—ñ: 3 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è"
- –î–æ–¥–∞—Ç–∏ manual retry –∫–Ω–æ–ø–∫—É

---

## 8Ô∏è‚É£ Mesh –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è

### –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω: ‚úÖ –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û –í RUST CORE

**DtnRouter implementation:**
```rust
// ya_ok_core/src/routing/mod.rs
async fn flood_packet(&self, packet: Packet) -> Result<(), RoutingError> {
    let packet_id = hex::encode(&packet.id);
    
    // –î–µ–¥—É–ø–ª—ñ–∫–∞—Ü—ñ—è
    let mut seen = self.seen_packets.write().await;
    if seen.contains(&packet_id) {
        return Ok(()); // –í–∂–µ –±–∞—á–∏–ª–∏ —Ü–µ–π –ø–∞–∫–µ—Ç
    }
    seen.insert(packet_id.clone());
    
    // –ù–∞–¥—ñ—Å–ª–∞—Ç–∏ –≤—Å—ñ–º –≤—ñ–¥–æ–º–∏–º peer'–∞–º
    let peers = self.known_peers().read().await;
    for (peer_id, _peer_info) in peers.iter() {
        self.transport.send_to(peer_id, &packet.to_bytes()).await?;
    }
    
    Ok(())
}
```

**Store & Forward:**
```rust
async fn handle_packet(&self, packet: Packet) -> Result<(), RoutingError> {
    // 1. –ó–±–µ—Ä–µ–≥—Ç–∏ –ø–∞–∫–µ—Ç
    self.storage.lock().unwrap().store_packet(&packet)?;
    
    // 2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –¥–ª—è –Ω–∞—Å
    if packet.recipient_id == self.identity_id {
        // –û–±—Ä–æ–±–∏—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–æ
        return self.process_local_packet(packet).await;
    }
    
    // 3. –ü–µ—Ä–µ—Å–ª–∞—Ç–∏ –¥–∞–ª—ñ (flood)
    self.flood_packet(packet).await
}
```

### ‚úÖ –°—Ç–∞—Ç—É—Å: –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**
1. –ü—Ä–∏—Å—Ç—Ä—ñ–π A –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è –ø—Ä–∏—Å—Ç—Ä–æ—é C
2. –ü–∞–∫–µ—Ç –Ω–∞–¥—Ö–æ–¥–∏—Ç—å –Ω–∞ –ø—Ä–∏—Å—Ç—Ä—ñ–π B (–ø—Ä–æ–º—ñ–∂–Ω–∏–π)
3. B –∑–±–µ—Ä—ñ–≥–∞—î –ø–∞–∫–µ—Ç –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º—É storage
4. B –ø–µ—Ä–µ—Å–∏–ª–∞—î –ø–∞–∫–µ—Ç –≤—Å—ñ–º —Å–≤–æ—ó–º peer'–∞–º (flooding)
5. –ü–∞–∫–µ—Ç –¥–æ—Å—è–≥–∞—î C –∞–±–æ –ø—Ä–∏—Å—Ç—Ä–æ—é –∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º
6. –î–µ–¥—É–ø–ª—ñ–∫–∞—Ü—ñ—è –∑–∞–ø–æ–±—ñ–≥–∞—î —Ü–∏–∫–ª–∞–º (seen_packets HashSet)

**–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è:**
- –î–æ–¥–∞—Ç–∏ hop count (TTL) –¥–ª—è –æ–±–º–µ–∂–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –ø–µ—Ä–µ—Å–∏–ª–∞–Ω—å
- –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ –º–∞—Ä—à—Ä—É—Ç: A ‚Üí B ‚Üí C (–¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞)
- –û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –≤–∏–±—ñ—Ä –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ peer'–∞ (–Ω–µ –≤–∏–ø–∞–¥–∫–æ–≤–∏–π flood)

---

## üìä –ü—ñ–¥—Å—É–º–∫–æ–≤–∞ —Ç–∞–±–ª–∏—Ü—è —Å—Ç–∞—Ç—É—Å—ñ–≤

| ‚Ññ | –ü—Ä–æ–±–ª–µ–º–∞ | –°—Ç–∞—Ç—É—Å | –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç | –ß–∞—Å –Ω–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è |
|---|----------|--------|-----------|-------------------|
| 1 | QR-–∫–æ–¥ –Ω–µ –ø—ñ–¥—Ç—è–≥—É—î —ñ–º'—è | ‚úÖ –ü—Ä–∞—Ü—é—î | Low | 0h (–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å) |
| 2 | –í–∏–±—ñ—Ä –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ | ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ | Low | 0h (–≤–∂–µ –ø—Ä–∞—Ü—é—î) |
| 3 | –í–∫–ª–∞–¥–∫–∏ –≤—Ö—ñ–¥–Ω—ñ/–≤–∏—Ö—ñ–¥–Ω—ñ | ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ | Low | 1h (–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ UI) |
| 4 | –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–µ –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—å—Å—è | ‚ö†Ô∏è –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ | **HIGH** | 8h (–¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ + fixes) |
| 5 | –î–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω—î –¥–æ–¥–∞–≤–∞–Ω–Ω—è | ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ | Medium | 2h (–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –ø.4) |
| 6 | –Ü–Ω–¥–∏–∫–∞—Ü—ñ—è –∑'—î–¥–Ω–∞–Ω–Ω—è | ‚ö†Ô∏è –ß–∞—Å—Ç–∫–æ–≤–æ | Medium | 4h (–¥–æ–¥–∞—Ç–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è UI) |
| 7 | Offline –±—É—Ñ–µ—Ä–∏–∑–∞—Ü—ñ—è | ‚úÖ –ü—Ä–∞—Ü—é—î | Low | 0h (–≤–∂–µ –ø—Ä–∞—Ü—é—î) |
| 8 | Mesh –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è | ‚úÖ –ü—Ä–∞—Ü—é—î | Low | 2h (–ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è) |

**–ó–∞–≥–∞–ª—å–Ω–∏–π —á–∞—Å: ~17 –≥–æ–¥–∏–Ω**

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π –ø–ª–∞–Ω –¥—ñ–π

### –î–µ–Ω—å 1 (8 –≥–æ–¥–∏–Ω)
1. **–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å** (–ø.4)
   - –î–æ–¥–∞—Ç–∏ –¥–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ peer registration
   - –¢–µ—Å—Ç—É–≤–∞—Ç–∏ Relay –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
   - –¢–µ—Å—Ç—É–≤–∞—Ç–∏ BLE —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç

2. **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –±–∞–≥—ñ–≤**
   - –Ø–∫—â–æ peer –Ω–µ —Ä–µ—î—Å—Ç—Ä—É—î—Ç—å—Å—è
   - –Ø–∫—â–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –Ω–µ —Å—Ç–∞—Ä—Ç—É—î
   - –Ø–∫—â–æ –ø–∞–∫–µ—Ç–∏ –Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—é—Ç—å—Å—è

### –î–µ–Ω—å 2 (6 –≥–æ–¥–∏–Ω)
3. **–Ü–Ω–¥–∏–∫–∞—Ü—ñ—è –∑'—î–¥–Ω–∞–Ω–Ω—è** (–ø.6)
   - –î–æ–¥–∞—Ç–∏ –º–µ—Ç–æ–¥–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å—É —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç—ñ–≤
   - –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø–µ—Ä—ñ–æ–¥–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è UI
   - –î–æ–¥–∞—Ç–∏ tooltips –∑ –¥–µ—Ç–∞–ª—è–º–∏

4. **–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è mesh –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—ó** (–ø.8)
   - –î–æ–¥–∞—Ç–∏ TTL –¥–ª—è –ø–∞–∫–µ—Ç—ñ–≤
   - –û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –≤–∏–±—ñ—Ä peer'–∞

### –î–µ–Ω—å 3 (3 –≥–æ–¥–∏–Ω–∏)
5. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è UX**
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤–∫–ª–∞–¥–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
   - –î–æ–¥–∞—Ç–∏ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏
   - –¢–µ—Å—Ç—É–≤–∞—Ç–∏ –¥–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω—î –¥–æ–¥–∞–≤–∞–Ω–Ω—è

---

## üîç –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∏–π —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–≤—ñ—Ä–æ–∫

### –ü–µ—Ä–µ–¥ –ø–æ—á–∞—Ç–∫–æ–º:
- [ ] Backup —ñ—Å–Ω—É—é—á–æ–≥–æ –∫–æ–¥—É
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–µ—Å—Ç–æ–≤—É –≥—ñ–ª–∫—É `fix/8-issues`
- [ ] –ü—ñ–¥–≥–æ—Ç—É–≤–∞—Ç–∏ 2 —Ç–µ—Å—Ç–æ–≤—ñ –ø—Ä–∏—Å—Ç—Ä–æ—ó

### –ü—ñ–¥ —á–∞—Å —Ä–æ–∑—Ä–æ–±–∫–∏:
- [ ] –î–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –Ω–∞ –∫–æ–∂–Ω–æ–º—É –∫—Ä–æ—Ü—ñ
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–∂–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó –æ–∫—Ä–µ–º–æ
- [ ] Unit —Ç–µ—Å—Ç–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤

### –ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è:
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ 2 –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö (Android)
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç—ñ–≤ (Relay/BLE/Mesh)
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è offline —Ä–µ–∂–∏–º—É
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ–≤–≥–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤ (A‚ÜíB‚ÜíC)
- [ ] Smoke —Ç–µ—Å—Ç –Ω–∞ iOS (–±–∞–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å)

---

## üìù –î–æ–¥–∞—Ç–∫–æ–≤—ñ –Ω–æ—Ç–∞—Ç–∫–∏

### –í–∞–∂–ª–∏–≤—ñ —Ñ–∞–π–ª–∏ –¥–ª—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è:
1. `MainFragment.kt` - –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ —Ç–∞ UI —Å—Ç–∞—Ç—É—Å—ñ–≤
2. `InboxFragment.kt` - –≤–∫–ª–∞–¥–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
3. `FamilyFragment.kt` - –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤
4. `TransportService.kt` - –æ–±—Ä–æ–±–∫–∞ incoming
5. `UdpTransport.kt` / `BleTransport.kt` - —Å—Ç–∞—Ç—É—Å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç—ñ–≤
6. `ya_ok_core/src/api/mod.rs` - –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Rust
7. `ya_ok_core/src/routing/mod.rs` - –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è

### –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:
```bash
# Android –ª–æ–≥–∏
adb logcat | grep "YaOk"

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ SQLite
adb shell "run-as app.poruch.ya_ok cat databases/ya_ok.db" > ya_ok.db
sqlite3 ya_ok.db "SELECT * FROM messages;"

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ relay –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
curl https://i-am-ok-relay.fly.dev/health
```

---

## ‚úÖ –í–∏—Å–Ω–æ–≤–æ–∫

–ë—ñ–ª—å—à—ñ—Å—Ç—å —Ñ—É–Ω–∫—Ü—ñ–π **–≤–∂–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ç–∞ –ø—Ä–∞—Ü—é—é—Ç—å**. –ì–æ–ª–æ–≤–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ - **–¥–æ—Å—Ç–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å** (–ø—É–Ω–∫—Ç 4), —è–∫–∞ –±–ª–æ–∫—É—î –ø—É–Ω–∫—Ç 5.

**–ö—Ä–∏—Ç–∏—á–Ω–∏–π —à–ª—è—Ö:**
1. –í–∏—Ä—ñ—à–∏—Ç–∏ –ø—Ä–æ–±–ª–µ–º—É –¥–æ—Å—Ç–∞–≤–∫–∏ (–ø.4) 
2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω—î –¥–æ–¥–∞–≤–∞–Ω–Ω—è (–ø.5)
3. –î–æ–¥–∞—Ç–∏ –≤—ñ–∑—É–∞–ª—å–Ω—ñ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ (–ø.6)
4. –ü–æ–∫—Ä–∞—â–∏—Ç–∏ UX (—Ä–µ—à—Ç–∞ –ø—É–Ω–∫—Ç—ñ–≤)

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–≤–Ω—ñ—Å—Ç—é —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π –º–µ—Å–µ–Ω–¥–∂–µ—Ä –∑ mesh –º–µ—Ä–µ–∂–µ—é —Ç–∞ offline –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é.
