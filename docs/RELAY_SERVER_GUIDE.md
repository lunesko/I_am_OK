# üì° RELAY SERVER GUIDE
 
## –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ ¬´–Ø –û–ö / I am OK¬ª
 
> **Relay ‚Äî —ç—Ç–æ —É—Å–∫–æ—Ä–∏—Ç–µ–ª—å –¥–æ—Å—Ç–∞–≤–∫–∏,
> –∞ –Ω–µ —á–∞—Å—Ç—å –ª–æ–≥–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã.**
 
---
 
## 1. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ relay-—Å–µ—Ä–≤–µ—Ä–∞
 
Relay –≤—ã–ø–æ–ª–Ω—è–µ—Ç **–æ–¥–Ω—É** —Ñ—É–Ω–∫—Ü–∏—é:
 
> **–ü—Ä–∏–Ω—è—Ç—å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞–∫–µ—Ç ‚Üí –ø–µ—Ä–µ—Å–ª–∞—Ç—å ‚Üí –∑–∞–±—ã—Ç—å**
 
–û–Ω **–ù–ï**:
 
* –Ω–µ —Ö—Ä–∞–Ω–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
* –Ω–µ –∑–Ω–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
* –Ω–µ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
* –Ω–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏–∫–æ–π
* –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –¥–æ—Å—Ç–∞–≤–∫—É
 
---
 
## 2. –ö–æ–≥–¥–∞ relay –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
 
Relay –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**, –µ—Å–ª–∏:
 
* –µ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç (3G / 4G / LTE / Wi-Fi)
* relay –¥–æ—Å—Ç—É–ø–µ–Ω
* policy —Ä–∞–∑—Ä–µ—à–∞–µ—Ç IP-—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç
 
–ï—Å–ª–∏ relay –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Äî —Å–∏—Å—Ç–µ–º–∞ **–ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å**.
 
---
 
## 3. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ relay (–º–∏–Ω–∏–º—É–º)
 
```
[ Client A ]
     |
   (UDP / QUIC)
     |
[ Relay ]
     |
   (UDP / QUIC)
     |
[ Client B ]
```
 
üìå Relay ‚Äî **—Ç—Ä—É–±–∞**, –Ω–µ —É–∑–µ–ª —Å–µ—Ç–∏.
 
---
 
## 4. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
 
### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –º–∏–Ω–∏–º—É–º
 
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç   | –í—ã–±–æ—Ä                           |
| ----------- | ------------------------------- |
| –Ø–∑—ã–∫        | Rust                            |
| –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç   | UDP (–æ—Å–Ω–æ–≤–∞)                    |
| –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ | QUIC                            |
| –•—Ä–∞–Ω–∏–ª–∏—â–µ   | ‚ùå –Ω–µ—Ç                           |
| –ë–î          | ‚ùå –Ω–µ—Ç                           |
| –õ–æ–≥–∏        | ‚ùå –Ω–µ—Ç                           |
| TLS         | ‚ùå –Ω–µ –Ω—É–∂–µ–Ω (payload –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω) |
 
---
 
## 5. –ü–æ–≤–µ–¥–µ–Ω–∏–µ relay (—Å—Ç—Ä–æ–≥–æ)
 
### –ü—Å–µ–≤–¥–æ–ª–æ–≥–∏–∫–∞
 
```text
receive packet
if packet.size > MAX ‚Üí drop
if packet.ttl == 0 ‚Üí drop
forward packet
forget packet
```
 
üìå TTL —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è **–Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ**, –Ω–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.
 
---
 
## 6. –§–æ—Ä–º–∞—Ç –ø–∞–∫–µ—Ç–∞ (relay-agnostic)
 
Relay **–ù–ï –ø–æ–Ω–∏–º–∞–µ—Ç** —Å—Ç—Ä—É–∫—Ç—É—Ä—É payload.
 
–û–Ω –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ:
 
```
[ HEADER | ENCRYPTED_PAYLOAD ]
```
 
–ò–∑ header –¥–æ–ø—É—Å—Ç–∏–º–æ:
 
* packet_size
* msg_id (hash)
* priority (optional)
 
---
 
## 7. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ)
 
### Rate limit
 
* –ø–æ IP
* –ø–æ —Ä–∞–∑–º–µ—Ä—É –ø–∞–∫–µ—Ç–∞
* –ø–æ —Å–µ–∫—É–Ω–¥–∞–º
 
### –†–∞–∑–º–µ—Ä—ã
 
* MAX packet: ~64 KB
* –ì–æ–ª–æ—Å ‚Äî chunked
 
---
 
## 8. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å relay
 
Relay —Å—á–∏—Ç–∞–µ—Ç—Å—è:
 
* –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º
* –Ω–µ–¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º
* –≤—Ä–µ–º–µ–Ω–Ω—ã–º
 
–ü–æ—ç—Ç–æ–º—É:
 
* **end-to-end encryption –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**
* relay –Ω–µ –∏–º–µ–µ—Ç –∫–ª—é—á–µ–π
* relay –º–æ–∂–Ω–æ –≤—ã–∫–ª—é—á–∏—Ç—å –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç
 
---
 
## 9. Deployment (—Ä–µ–∞–ª—å–Ω—ã–π)
 
### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
 
* VPS $5‚Äì10
* 1 CPU
* 512 MB RAM
* Ubuntu / Debian
 
---
 
### Systemd service (–ø—Ä–∏–º–µ—Ä)
 
```ini
[Unit]
Description=YA OK Relay
After=network.target
 
[Service]
ExecStart=/usr/local/bin/yaok-relay
Restart=always
User=nobody
NoNewPrivileges=true
 
[Install]
WantedBy=multi-user.target
```
 
---
 
## 10. –°–µ—Ç—å –∏ firewall
 
–û—Ç–∫—Ä—ã—Ç—å:
 
* UDP –ø–æ—Ä—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä 40000‚Äì40100)
* –ù–∏–∫–∞–∫–∏—Ö TCP API
 
–ó–∞–∫—Ä—ã—Ç—å –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ.
 
---
 
## 11. –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
 
**–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ, —Ç—É–ø–æ–µ**
 
* –Ω–µ—Å–∫–æ–ª—å–∫–æ relay
* –∫–ª–∏–µ–Ω—Ç—ã –∑–Ω–∞—é—Ç —Å–ø–∏—Å–æ–∫
* —Å–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä
* fallback
 
üìå Relay –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –º–µ–∂–¥—É —Å–æ–±–æ–π.
 
---
 
## 12. –ì–µ–æ–≥—Ä–∞—Ñ–∏—è
 
–õ—É—á—à–µ:
 
* –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–∞–Ω
* —Ä–∞–∑–Ω—ã–µ —Ö–æ—Å—Ç–µ—Ä—ã
* —Ä–∞–∑–Ω—ã–µ IP
 
–ß—Ç–æ–±—ã:
 
* –Ω–µ –±—ã–ª–æ –æ–¥–Ω–æ–π —Ç–æ—á–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
 
---
 
## 13. –ß—Ç–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å (–µ—Å–ª–∏ –æ—á–µ–Ω—å –Ω—É–∂–Ω–æ)
 
–ï—Å–ª–∏ **—Å–æ–≤—Å–µ–º –Ω–µ–ª—å–∑—è –±–µ–∑ –ª–æ–≥–æ–≤**:
 
‚úî —Ç–æ–ª—å–∫–æ:
 
* uptime
* CPU / RAM
* traffic volume
 
‚ùå –Ω–∏–∫–æ–≥–¥–∞:
 
* IP ‚Üî msg_id
* payload
* —á–∞—Å—Ç–æ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
 
---
 
## 14. –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ç—É—Å relay
 
Relay:
 
* –Ω–µ —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ
* –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
* –Ω–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
 
‚û°Ô∏è **–Ω–µ —è–≤–ª—è–µ—Ç—Å—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º –ü–î**
 
---
 
## 15. –ö–æ–≥–¥–∞ relay –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å
 
–í—Å–µ–≥–¥–∞.
 
–ò —Å–∏—Å—Ç–µ–º–∞:
 
* –Ω–µ –ª–æ–º–∞–µ—Ç—Å—è
* –Ω–µ –¥–µ–≥—Ä–∞–¥–∏—Ä—É–µ—Ç
* –ø—Ä–æ—Å—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–µ–µ
 
---
 
## 16. –ö—Ä–∏—Ç–µ—Ä–∏–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ relay
 
> **–ï—Å–ª–∏ –∑–∞–≤—Ç—Ä–∞ –≤—Å–µ relay –∏—Å—á–µ–∑–Ω—É—Ç ‚Äî
> ¬´–Ø –û–ö¬ª –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.**
 
---
 
## 17. –§–∏–Ω–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞
 
**Relay ‚Äî —ç—Ç–æ –∫–æ—Å—Ç—ã–ª—å —Å–∫–æ—Ä–æ—Å—Ç–∏,
–∞ –Ω–µ –ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫ —Å–∏—Å—Ç–µ–º—ã.**
 
---
 
 
# üì° RELAY NODE ‚Äî –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –°–ü–ï–¶–ò–§–ò–ö–ê–¶–ò–Ø
 
**–ü—Ä–æ–µ–∫—Ç:** –Ø –û–ö / I am OK
**–°—Ç—É–¥–∏—è:** Poruch
**–°—Ç–∞—Ç—É—Å:** Optional infrastructure (—É—Å–∫–æ—Ä–∏—Ç–µ–ª—å, –Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å)
 
---
 
## 1. –†–æ–ª—å Relay –≤ —Å–∏—Å—Ç–µ–º–µ
 
### 1.1 –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
 
Relay ‚Äî —ç—Ç–æ **–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π —É–∑–µ–ª**, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è:
 
* —É—Å–∫–æ—Ä–µ–Ω–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
* –æ–±—Ö–æ–¥–∞ NAT / CGNAT
* —Å–Ω–∏–∂–µ–Ω–∏—è –∑–∞–¥–µ—Ä–∂–µ–∫ –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –∞—É–¥–∏–æ –∏ mesh-–ø–∞–∫–µ—Ç–æ–≤
 
### 1.2 –ü—Ä–∏–Ω—Ü–∏–ø
 
Relay **–ù–ï —è–≤–ª—è–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**.
 
–û–Ω:
 
* –Ω–µ –∑–Ω–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
* –Ω–µ —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ
* –Ω–µ –∏–º–µ–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–æ–≤
* –Ω–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏–∫–æ–π
* –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –¥–æ—Å—Ç–∞–≤–∫—É
 
> Relay = ¬´–ø—Ä–∏–Ω—è–ª ‚Üí –ø–µ—Ä–µ—Å–ª–∞–ª ‚Üí –∑–∞–±—ã–ª¬ª
 
---
 
## 2. –ö–æ–≥–¥–∞ Relay –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
 
Relay **–≤–∫–ª—é—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**, –µ—Å–ª–∏:
 
* –¥–æ—Å—Ç—É–ø–Ω–∞ IP-—Å–µ—Ç—å (3G / 4G / LTE / Wi-Fi)
* relay reachable
* –ø–æ–ª–∏—Ç–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç IP-—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç
 
### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ (–∫–ª–∏–µ–Ω—Ç):
 
1. Direct P2P (LAN / Wi-Fi Direct / Bluetooth / Mesh)
2. **Relay (UDP / QUIC)**
3. Store-and-Forward (—á–µ—Ä–µ–∑ —Å–æ—Å–µ–¥–µ–π / delay)
 
Relay **–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É** –±–µ–∑ –Ω–µ–≥–æ.
 
---
 
## 3. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
 
### 3.1 –õ–æ–≥–∏—á–µ—Å–∫–∞—è —Å—Ö–µ–º–∞
 
```
[ Device A ]
   ‚îÇ
   ‚îÇ encrypted packet
   ‚ñº
[ Relay Node ]
   ‚îÇ
   ‚îÇ same packet
   ‚ñº
[ Device B ]
```
 
Relay:
 
* –Ω–µ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç payload
* –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
* –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç state
 
---
 
## 4. –ü—Ä–æ—Ç–æ–∫–æ–ª
 
### 4.1 –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç
 
**–û—Å–Ω–æ–≤–Ω–æ–π:** UDP
**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:** QUIC (–ø–æ–≤–µ—Ä—Ö UDP)
 
–ü—Ä–∏—á–∏–Ω—ã:
 
* –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
* –ø—Ä–æ—Å—Ç–æ—Ç–∞
* —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –ø–ª–æ—Ö–æ–π —Å–µ—Ç–∏
* –ª–µ–≥–∫–æ –º–∞—Å–∫–∏—Ä—É–µ—Ç—Å—è
 
---
 
### 4.2 –§–æ—Ä–º–∞—Ç –ø–∞–∫–µ—Ç–∞ (relay-agnostic)
 
Relay –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π header:
 
```
| magic | version | packet_len | ttl | flags | opaque_payload |
```
 
* `opaque_payload` ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω
* TTL —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è **–Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ**
* Relay **–Ω–µ –ø–∞—Ä—Å–∏—Ç payload**
 
---
 
## 5. –ü–æ–≤–µ–¥–µ–Ω–∏–µ Relay (—Å—Ç—Ä–æ–≥–æ)
 
### 5.1 –ê–ª–≥–æ—Ä–∏—Ç–º
 
```text
receive packet
if packet_len > MAX ‚Üí drop
if ttl == 0 ‚Üí drop
if rate_limit_exceeded ‚Üí drop
forward packet
forget packet
```
 
### 5.2 –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
 
* MAX packet: 64 KB
* MAX packets/sec per IP
* no retries
* no acknowledgements
 
---
 
## 6. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
 
### 6.1 –ú–æ–¥–µ–ª—å –¥–æ–≤–µ—Ä–∏—è
 
Relay —Å—á–∏—Ç–∞–µ—Ç—Å—è:
 
* –Ω–µ–¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º
* –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º
* –≤—Ä–µ–º–µ–Ω–Ω—ã–º
 
### 6.2 –°–ª–µ–¥—Å—Ç–≤–∏—è
 
* end-to-end encryption –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
* relay –Ω–µ —Ö—Ä–∞–Ω–∏—Ç –∫–ª—é—á–∏
* relay –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –±–µ–∑ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π
 
---
 
## 7. –°—Ç–µ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
 
### 7.1 –Ø–∑—ã–∫
 
**Rust**
 
–ü—Ä–∏—á–∏–Ω—ã:
 
* –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–∞–º—è—Ç–∏
* –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
* –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π runtime
* –ø—Ä–æ—Å—Ç–∞—è —Å–±–æ—Ä–∫–∞ –ø–æ–¥ Linux
 
---
 
### 7.2 –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ (–ø—Ä–∏–º–µ—Ä)
 
* `tokio` ‚Äî async runtime
* `bytes` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –±—É—Ñ–µ—Ä–∞–º–∏
* `quinn` ‚Äî QUIC (–µ—Å–ª–∏ –≤–∫–ª—é—á–∞–µ–º)
* `clap` ‚Äî –∫–æ–Ω—Ñ–∏–≥
* **–Ω–∏–∫–∞–∫–∏—Ö ORM, –ë–î, –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤**
 
---
 
## 8. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (Relay)
 
```
yaok-relay/
‚îú‚îÄ‚îÄ Cargo.toml
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.rs
‚îÇ   ‚îú‚îÄ‚îÄ config.rs        # –ø–æ—Ä—Ç—ã, –ª–∏–º–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ udp.rs           # UDP listener
‚îÇ   ‚îú‚îÄ‚îÄ quic.rs          # (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÇ   ‚îú‚îÄ‚îÄ ratelimit.rs
‚îÇ   ‚îî‚îÄ‚îÄ metrics.rs       # —Ç–æ–ª—å–∫–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏
‚îî‚îÄ‚îÄ systemd/
    ‚îî‚îÄ‚îÄ yaok-relay.service
```
 
---
 
## 9. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
 
### 9.1 –ü—Ä–∏–º–µ—Ä (env / file)
 
```env
RELAY_PORT=40000
MAX_PACKET_SIZE=65535
RATE_LIMIT_PPS=100
ENABLE_QUIC=false
```
 
---
 
## 10. –ì–¥–µ –∏ –∫–∞–∫ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å
 
### 10.1 –¢–∏–ø —Å–µ—Ä–≤–µ—Ä–∞
 
**VPS (–¥–µ—à—ë–≤—ã–π, disposable)**
 
–ú–∏–Ω–∏–º—É–º:
 
* 1 vCPU
* 512 MB RAM
* Linux (Ubuntu / Debian)
* $5‚Äì10 / –º–µ—Å—è—Ü
 
### 10.2 –•–æ—Å—Ç–µ—Ä—ã (–ø—Ä–∏–Ω—Ü–∏–ø)
 
* —Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞–Ω—ã
* —Ä–∞–∑–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
* –Ω–µ –æ–¥–∏–Ω —Ä–µ–≥–∏–æ–Ω
 
üìå –õ—É—á—à–µ 3‚Äì5 relay, —á–µ–º –æ–¥–∏–Ω ¬´–∏–¥–µ–∞–ª—å–Ω—ã–π¬ª.
 
---
 
## 11. Deployment
 
### 11.1 –°–±–æ—Ä–∫–∞
 
```bash
cargo build --release
```
 
### 11.2 –£—Å—Ç–∞–Ω–æ–≤–∫–∞
 
```bash
cp target/release/yaok-relay /usr/local/bin/
```
 
### 11.3 Systemd
 
```ini
[Service]
ExecStart=/usr/local/bin/yaok-relay
Restart=always
User=nobody
```
 
---
 
## 12. Firewall
 
–û—Ç–∫—Ä—ã—Ç–æ:
 
* UDP –ø–æ—Ä—Ç relay
 
–ó–∞–∫—Ä—ã—Ç–æ:
 
* –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ
 
‚ùå –ù–∏–∫–∞–∫–∏—Ö HTTP, REST, admin-–ø–∞–Ω–µ–ª–µ–π
 
---
 
## 13. –õ–æ–≥–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏
 
### –†–∞–∑—Ä–µ—à–µ–Ω–æ:
 
* uptime
* CPU / RAM
* –æ–±—â–∏–π —Ç—Ä–∞—Ñ–∏–∫
 
### –ó–∞–ø—Ä–µ—â–µ–Ω–æ:
 
* payload
* —Å–≤—è–∑–∏ IP ‚Üî —Å–æ–æ–±—â–µ–Ω–∏—è
* user-level –¥–∞–Ω–Ω—ã–µ
 
---
 
## 14. –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ç—É—Å
 
Relay:
 
* –Ω–µ —Ö—Ä–∞–Ω–∏—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
* –Ω–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
* –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–º
 
‚û°Ô∏è **–Ω–µ –ø–æ–¥–ø–∞–¥–∞–µ—Ç –ø–æ–¥ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫–∞–∫ —Å–µ—Ä–≤–∏—Å**
 
---
 
## 15. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ Relay
 
Relay —Å—á–∏—Ç–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º, –µ—Å–ª–∏:
 
* –µ–≥–æ –º–æ–∂–Ω–æ –≤—ã–∫–ª—é—á–∏—Ç—å –±–µ–∑ –ø–∞–¥–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
* –æ–Ω –Ω–µ —Ö—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ
* –æ–Ω –Ω–µ –∑–Ω–∞–µ—Ç, –∫—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
* –æ–Ω –ª–µ–≥–∫–æ –∑–∞–º–µ–Ω—è–µ–º
 
---
 
## 16. –ö–ª—é—á–µ–≤–∞—è —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è
 
> **Relay ‚Äî —ç—Ç–æ —É—Å–∫–æ—Ä–∏—Ç–µ–ª—å,
> –∞ –Ω–µ —Ç–æ—á–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è.**
 
---
