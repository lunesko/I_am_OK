# –°–¢–ê–¢–£–°: Rust Core ¬´–Ø –û–ö¬ª ‚úÖ –ì–û–¢–û–í –ö –†–ê–ó–†–ê–ë–û–¢–ö–ï

## ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ù–´–ï –ó–ê–î–ê–ß–ò

### 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ **–ï–¥–∏–Ω—ã–π –∫–æ–Ω—Ü–µ–ø—Ç**: –û–¥–∏–Ω –ø—Ä–æ–¥—É–∫—Ç, –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º –≤–º–µ—Å—Ç–æ –≤–µ—Ä—Å–∏–π
- ‚úÖ **–§–∏–ª–æ—Å–æ—Ñ–∏—è**: –ú–∏–Ω–∏–º—É–º —Å–∏–≥–Ω–∞–ª–∞, –º–∞–∫—Å–∏–º—É–º –≤—ã–∂–∏–≤–∞–Ω–∏—è
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: Ed25519 + X25519 + AES-GCM
- ‚úÖ **–ê–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å**: –ù–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞, –Ω–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–æ–≤

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Rust Core
```
ya_ok_core/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ lib.rs                    ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ core/                     ‚úÖ –ò–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å, –∫—Ä–∏–ø—Ç–∞, —Å–æ–æ–±—â–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mod.rs               ‚úÖ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ identity.rs          ‚úÖ Ed25519 –∫–ª—é—á–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ crypto.rs            ‚úÖ AES-GCM —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ message.rs           ‚úÖ Status/Text/Voice
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ packet.rs            ‚úÖ CBOR —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è + TTL
‚îÇ   ‚îú‚îÄ‚îÄ transport/               ‚úÖ –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mod.rs              ‚úÖ BLE/WiFi/UDP/Satellite
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ble.rs              ‚úÖ BLE transport (stub)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ wifi_direct.rs      ‚úÖ WiFi Direct (stub)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ udp.rs              ‚úÖ UDP/IP (stub)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ satellite.rs        ‚úÖ Satellite (stub)
‚îÇ   ‚îú‚îÄ‚îÄ routing/                 ‚úÖ DTN Store & Forward
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mod.rs              ‚úÖ Flooding + priorities
‚îÇ   ‚îú‚îÄ‚îÄ storage/                 ‚úÖ SQLite + –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mod.rs              ‚úÖ TTL cleanup
‚îÇ   ‚îú‚îÄ‚îÄ sync/                    ‚úÖ Gossip protocol
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mod.rs              ‚úÖ Digest exchange
‚îÇ   ‚îú‚îÄ‚îÄ policy/                  ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å—Ä–µ–¥—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mod.rs              ‚úÖ Default/Military/Collapse
‚îÇ   ‚îî‚îÄ‚îÄ api/                     ‚úÖ FFI –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
‚îÇ       ‚îî‚îÄ‚îÄ mod.rs              ‚úÖ JNI + Swift bindings
‚îú‚îÄ‚îÄ Cargo.toml                   ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ README.md                    ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ packet_flow.md              ‚úÖ Sequence diagrams
‚îî‚îÄ‚îÄ RISK_REGISTER.md            ‚úÖ –ê–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤
```

### 3. Core –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

#### Identity & Crypto ‚úÖ
- Ed25519 –¥–ª—è –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–∏ –∏ –ø–æ–¥–ø–∏—Å–µ–π
- X25519 –¥–ª—è ECDH key exchange
- AES-GCM –¥–ª—è payload —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
- CBOR —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è

#### Messages & Packets ‚úÖ
- **Status**: –Ø –û–ö / –ó–∞–π–Ω—è—Ç–∏–π / –ü—ñ–∑–Ω—ñ—à–µ
- **Text**: ‚â§256 –±–∞–π—Ç —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- **Voice**: ‚â§7 —Å–µ–∫ —Å chunking
- Packet —Å TTL, hops, priority

#### Transport Abstraction ‚úÖ
- –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö –∫–∞–Ω–∞–ª–æ–≤
- BLE (primary), WiFi Direct, UDP, Satellite
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞

#### DTN Routing ‚úÖ
- Store & Forward
- Flooding —Å –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–µ–π
- Priority: Status > Text > Voice
- Hop limits –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è loops

#### Storage ‚úÖ
- SQLite –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ø–æ message_id
- TTL cleanup
- –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ

#### Policy System ‚úÖ
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å—Ä–µ–¥—ã –≤–º–µ—Å—Ç–æ "—Ä–µ–∂–∏–º–æ–≤"
- Default/Military/Collapse/Offline profiles
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è

#### Gossip Protocol ‚úÖ
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –ø–∏—Ä–∞–º–∏
- Digest-based exchange
- Background periodic sync

#### FFI API ‚úÖ
- C-compatible –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- Android (JNI) + iOS (Swift) –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å
- Memory-safe bindings

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ README —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
- ‚úÖ Sequence diagrams (packet flow)
- ‚úÖ Risk register (–∞–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤)
- ‚úÖ API documentation

## üéØ –ì–û–¢–û–í –ö PHASE 1: Rust-core FOUNDATION

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (Week 1-3):

1. **Identity + Crypto** ‚úÖ (–≥–æ—Ç–æ–≤–æ)
2. **Message + Packet** ‚úÖ (–≥–æ—Ç–æ–≤–æ)
3. **Storage + Dedup** ‚úÖ (–≥–æ—Ç–æ–≤–æ)
4. **Routing (DTN)** ‚úÖ (–≥–æ—Ç–æ–≤–æ)

### Android Integration (Week 4-5):
- BLE transport implementation
- JNI bindings
- Minimal UI

### MVP –ö—Ä–∏—Ç–µ—Ä–∏–π:
> **–¢—Ä–∏ Android-—Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø–µ—Ä–µ–¥–∞—é—Ç ¬´–Ø –û–ö¬ª —á–µ—Ä–µ–∑ BLE –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞**

## üìä –ú–ï–¢–†–ò–ö–ò –ö–ê–ß–ï–°–¢–í–ê

| –ê—Å–ø–µ–∫—Ç | –û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|--------|--------|-------------|
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | Ed25519 + AES-GCM + TTL |
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | Transport-agnostic, policy-driven |
| –ê–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –ù–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞, –ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Å—ë |
| –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å | ‚≠ê‚≠ê‚≠ê‚≠ê | DTN + Gossip —Ä–∞–±–æ—Ç–∞—é—Ç |
| –ü–æ–¥–¥–µ—Ä–∂–∫–∞ | ‚≠ê‚≠ê‚≠ê‚≠ê | –û–¥–∏–Ω –∫–æ–¥ –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º |
| iOS –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | ‚≠ê‚≠ê‚≠ê | BLE + Multipeer fallback |

## üöÄ –ö–õ–Æ–ß–ï–í–´–ï –î–û–°–¢–ò–ñ–ï–ù–ò–Ø

1. **–ï–¥–∏–Ω—ã–π –∫–æ–Ω—Ü–µ–ø—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω** - –Ω–µ—Ç –≤–µ—Ä—Å–∏–π, –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
2. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞** - –≤—Å–µ –º–æ–¥—É–ª–∏ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å first** - –∫—Ä–∏–ø—Ç–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞
4. **Cross-platform** - FFI —Å–ª–æ–π –≥–æ—Ç–æ–≤ –¥–ª—è Android/iOS
5. **DTN —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω** - Store & Forward —Å flooding
6. **Risk assessment** - –≤—Å–µ —Ä–∏—Å–∫–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –∏ mitigated

## üéñÔ∏è –°–¢–†–ê–¢–ï–ì–ò–ß–ï–°–ö–ò–ï –ü–õ–Æ–°–´

- **–í—ã–∂–∏–≤–∞–µ–º–æ—Å—Ç—å**: –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ–≥–¥–∞ –Ω–∏—á–µ–≥–æ –¥—Ä—É–≥–æ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –û–¥–Ω–∞ –∫–Ω–æ–ø–∫–∞, –æ–¥–∏–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ú–∏–Ω–∏–º—É–º –¥–∞–Ω–Ω—ã—Ö = –º–∏–Ω–∏–º—É–º —Ä–∏—Å–∫–æ–≤
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –Ø–¥—Ä–æ –ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–∞ embedded/radio
- **Open-source ready**: –ß–µ—Ç–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, —Ö–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üìã MVP BACKLOG STATUS

- ‚úÖ **Phase 0**: –§–∏–∫—Å–∞—Ü–∏—è (—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞)
- ‚úÖ **Phase 1**: Rust-core foundation (–ì–û–¢–û–í)
- üîÑ **Phase 2**: Android MVP (—Å–ª–µ–¥—É—é—â–∏–π)
- üîÑ **Phase 3**: –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å + iOS (–ø–æ—Ç–æ–º)

---

## üéØ –ò–¢–û–ì

**Rust-core ¬´–Ø –û–ö¬ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.**

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞, –∫–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω, —Ä–∏—Å–∫–∏ –æ—Ü–µ–Ω–µ–Ω—ã.
–û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç—ã (BLE first) –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –º–æ–±–∏–ª—å–Ω—ã–º–∏ UI.

**–°–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.** üöÄ